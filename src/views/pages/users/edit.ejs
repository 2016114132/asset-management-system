<%- include("../../partials/header", { button: { name: "Back to Users", link: "/users", icon: "fas fa-arrow-left" } }) %>

<section class="content">
  <div class="container-fluid">
    <form action="/users/edit/<%= user.id %>" method="POST">
      <div class="card">
        <div class="card-body">

          <div class="form-group">
            <label>Employee</label>
            <input type="text" class="form-control" value="<%= employee.first_name %> <%= employee.last_name %>" readonly>
          </div>

          <div class="form-group">
            <label>Email <span class="text-danger">*</span></label>
            <input type="email" name="email" class="form-control" value="<%= user.email %>" required>
          </div>

          <div class="form-group">
            <label>Change Password <small class="text-muted">(leave blank to keep current)</small></label>
            <input type="password" name="password" class="form-control">
          </div>

          <div class="form-group">
            <label>Role <span class="text-danger">*</span></label>
            <select name="role_id" class="form-control" required>
              <% roles.forEach(role => { %>
                <option value="<%= role.id %>" <%= role_id === role.id ? 'selected' : '' %>><%= role.name %></option>
              <% }) %>
            </select>
          </div>

          <div class="form-group">
            <label>Status</label>
            <select name="status" class="form-control">
              <option value="Active" <%= user.status === 'Active' ? 'selected' : '' %>>Active</option>
              <option value="Inactive" <%= user.status === 'Inactive' ? 'selected' : '' %>>Inactive</option>
            </select>
          </div>

        </div>
        <div class="card-footer text-right">
          <a href="/users" class="btn btn-secondary">Cancel</a>
          <button type="submit" class="btn btn-primary">Update</button>
        </div>
      </div>
    </form>
  </div>
</section>

<%- include("../../partials/footer") %>
